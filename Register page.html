<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cybersecurity Symposium – Registration</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0b0f15;
      --bg-elev: #111827ee;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --primary: #60a5fa;
      --primary-strong: #3b82f6;
      --input-bg: #0f1622;
      --input-border: #1f2937;
      --success: #10b981;
      --danger: #ef4444;
      --glass: rgba(17, 24, 39, 0.6);
      --shadow: 0 10px 30px rgba(2, 6, 23, 0.45);
    }

    :root.light {
      --bg: #f7fafc;
      --bg-elev: #ffffffdd;
      --text: #0f172a;
      --muted: #475569;
      --primary: #2563eb;
      --primary-strong: #1d4ed8;
      --input-bg: #ffffff;
      --input-border: #e5e7eb;
      --glass: rgba(255, 255, 255, 0.7);
      --shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 10% 10%, rgba(37, 99, 235, .08), transparent 50%),
                  radial-gradient(1000px 700px at 90% 20%, rgba(59, 130, 246, .08), transparent 50%),
                  radial-gradient(1000px 900px at 50% 100%, rgba(16, 185, 129, .06), transparent 55%),
                  var(--bg);
      color: var(--text);
      overflow-x: hidden;
    }

    /* Cyber grid background */
    .grid-bg {
      position: fixed;
      inset: 0;
      background-image: linear-gradient(rgba(99, 102, 241, 0.12) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(99, 102, 241, 0.12) 1px, transparent 1px);
      background-size: 32px 32px, 32px 32px;
      mask-image: radial-gradient(ellipse at center, rgba(0,0,0,.6), rgba(0,0,0,.95));
      z-index: 0;
      pointer-events: none;
    }

    .container {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 32px 16px;
    }

    .card {
      width: 100%;
      max-width: 980px;
      background: var(--glass);
      backdrop-filter: saturate(140%) blur(14px);
      border: 1px solid var(--input-border);
      border-radius: 18px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .header {
      position: relative;
      padding: 28px 28px 20px 28px;
      border-bottom: 1px solid var(--input-border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .brand-logo {
      width: 42px;
      height: 42px;
      border-radius: 10px;
      display: grid;
      place-items: center;
      background: linear-gradient(135deg, rgba(37, 99, 235, .25), rgba(16, 185, 129, .25));
      border: 1px solid var(--input-border);
      box-shadow: inset 0 0 24px rgba(59, 130, 246, .15);
    }

    .brand h1 {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 0.2px;
    }

    .theme-toggle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--bg-elev);
      color: var(--text);
      border: 1px solid var(--input-border);
      padding: 10px 14px;
      border-radius: 999px;
      cursor: pointer;
      user-select: none;
      transition: transform .15s ease;
    }
    .theme-toggle:active { transform: translateY(1px); }

    .content {
      display: grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 0;
    }

    .left {
      padding: 28px;
      border-right: 1px solid var(--input-border);
    }

    .right {
      padding: 28px;
    }

    @media (max-width: 900px) {
      .content { grid-template-columns: 1fr; }
      .left { border-right: none; border-bottom: 1px solid var(--input-border); }
    }

    .intro {
      margin-bottom: 20px;
    }
    .intro h2 { margin: 0 0 6px 0; font-size: 22px; }
    .intro p { margin: 0; color: var(--muted); font-size: 14px; }

    form { display: grid; gap: 14px; }
    .row { display: grid; gap: 14px; grid-template-columns: 1fr 1fr; }
    @media (max-width: 640px) { .row { grid-template-columns: 1fr; } }

    .field {
      display: grid;
      gap: 8px;
    }

    .label { font-size: 13px; color: var(--muted); }
    .control {
      position: relative;
      background: var(--input-bg);
      border: 1px solid var(--input-border);
      border-radius: 12px;
      display: flex;
      align-items: center;
      padding: 10px 12px;
      gap: 10px;
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease;
    }
    .control:focus-within { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(37, 99, 235, .12); }
    .control input,
    .control select,
    .control textarea {
      width: 100%;
      background: transparent;
      color: var(--text);
      border: 0;
      outline: 0;
      font-size: 14px;
    }
    .control textarea { resize: vertical; min-height: 90px; }

    .hint { font-size: 12px; color: var(--muted); }
    .error { font-size: 12px; color: var(--danger); display: none; }
    .error.show { display: block; }

    .checkbox {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      color: var(--muted);
    }
    .checkbox input { width: 18px; height: 18px; }

    .button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      background: linear-gradient(135deg, var(--primary), var(--primary-strong));
      color: #fff;
      border: 0;
      border-radius: 12px;
      padding: 12px 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform .15s ease, box-shadow .2s ease;
      box-shadow: 0 10px 20px rgba(37, 99, 235, .25);
    }
    .button:hover { transform: translateY(-1px); }
    .button:active { transform: translateY(0); }
    .button[disabled] { opacity: .6; cursor: not-allowed; }

    .kpis { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 8px; }
    .kpi {
      background: var(--bg-elev);
      border: 1px solid var(--input-border);
      border-radius: 14px;
      padding: 16px;
    }
    .kpi .value { font-size: 22px; font-weight: 700; }
    .kpi .desc { font-size: 12px; color: var(--muted); }

    .workshops { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 640px) { .workshops { grid-template-columns: 1fr; } }
    .pill {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      background: var(--bg-elev);
      border: 1px solid var(--input-border);
      border-radius: 999px;
    }

    .status {
      margin-top: 12px;
      font-size: 14px;
      color: var(--muted);
      min-height: 20px;
    }

    .toast {
      position: fixed;
      right: 20px;
      top: 20px;
      background: var(--bg-elev);
      border: 1px solid var(--input-border);
      color: var(--text);
      padding: 12px 14px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      opacity: 0;
      transform: translateY(-8px);
      pointer-events: none;
      transition: opacity .25s ease, transform .25s ease;
      z-index: 10;
    }
    .toast.show { opacity: 1; transform: translateY(0); }
  </style>
</head>
<body>
  <div class="grid-bg"></div>
  <div class="toast" id="toast">Saved</div>
  <div class="container">
    <div class="card">
      <div class="header">
        <div class="brand">
          <div class="brand-logo" aria-hidden="true">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M12 2l8 4v6c0 5-3.5 9.5-8 10-4.5-.5-8-5-8-10V6l8-4Z" stroke="currentColor" stroke-width="1.5" />
              <path d="M8 12l2 2 6-6" stroke="currentColor" stroke-width="1.5" />
            </svg>
          </div>
          <h1>Cybersecurity Symposium • Registration</h1>
        </div>
        <button id="themeToggle" class="theme-toggle" type="button" aria-label="Toggle theme">
          <svg id="sun" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.5"/>
            <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          <span id="themeLabel">Light</span>
        </button>
      </div>

      <div class="content">
        <section class="left">
          <div class="intro">
            <h2>Secure your spot</h2>
            <p>Join leaders, researchers, and practitioners for deep dives into threat intel, AI security, and zero trust. Limited seats.</p>
          </div>

          <div class="kpis">
            <div class="kpi">
              <div class="value">1,200+</div>
              <div class="desc">Attendees expected</div>
            </div>
            <div class="kpi">
              <div class="value">60+</div>
              <div class="desc">Speakers</div>
            </div>
            <div class="kpi">
              <div class="value">25</div>
              <div class="desc">Hands‑on sessions</div>
            </div>
          </div>

          <div style="height: 14px"></div>

          <form id="registerForm" novalidate>
            <div class="row">
              <div class="field">
                <label class="label" for="fullName">Full name</label>
                <div class="control">
                  <input id="fullName" name="fullName" type="text" placeholder="Alex Morgan" autocomplete="name" required />
                </div>
                <div class="error" data-error-for="fullName">Please enter your full name.</div>
              </div>
              <div class="field">
                <label class="label" for="email">Email</label>
                <div class="control">
                  <input id="email" name="email" type="email" placeholder="alex@example.com" autocomplete="email" required />
                </div>
                <div class="error" data-error-for="email">Enter a valid email address.</div>
              </div>
            </div>

            <div class="row">
              <div class="field">
                <label class="label" for="organization">Organization</label>
                <div class="control">
                  <input id="organization" name="organization" type="text" placeholder="Company or Institution" required />
                </div>
                <div class="error" data-error-for="organization">Please enter your organization.</div>
              </div>
              <div class="field">
                <label class="label" for="role">Role</label>
                <div class="control">
                  <select id="role" name="role" required>
                    <option value="" disabled selected>Select role</option>
                    <option>Security Engineer</option>
                    <option>Researcher</option>
                    <option>CISO / Leadership</option>
                    <option>Developer</option>
                    <option>Student</option>
                    <option>Other</option>
                  </select>
                </div>
                <div class="error" data-error-for="role">Please choose a role.</div>
              </div>
            </div>

            <div class="row">
              <div class="field">
                <label class="label" for="phone">Phone (optional)</label>
                <div class="control">
                  <input id="phone" name="phone" type="tel" placeholder="+1 555 123 4567" autocomplete="tel" />
                </div>
                <div class="hint">We’ll only contact you for urgent updates.</div>
              </div>
              <div class="field">
                <label class="label" for="attendance">Attendance</label>
                <div class="control">
                  <select id="attendance" name="attendance" required>
                    <option value="" disabled selected>Select type</option>
                    <option>In‑person</option>
                    <option>Virtual</option>
                  </select>
                </div>
                <div class="error" data-error-for="attendance">Please select an attendance type.</div>
              </div>
            </div>

            <div class="field">
              <span class="label">Workshops of interest</span>
              <div class="workshops">
                <label class="pill"><input type="checkbox" name="workshops" value="Threat Intelligence" /> Threat Intelligence</label>
                <label class="pill"><input type="checkbox" name="workshops" value="Incident Response" /> Incident Response</label>
                <label class="pill"><input type="checkbox" name="workshops" value="AppSec & SAST" /> AppSec & SAST</label>
                <label class="pill"><input type="checkbox" name="workshops" value="Cloud Security" /> Cloud Security</label>
              </div>
            </div>

            <div class="row">
              <div class="field">
                <label class="label" for="experience">Experience level</label>
                <div class="control">
                  <select id="experience" name="experience" required>
                    <option value="" disabled selected>Select level</option>
                    <option>Beginner</option>
                    <option>Intermediate</option>
                    <option>Advanced</option>
                  </select>
                </div>
                <div class="error" data-error-for="experience">Please select your experience level.</div>
              </div>
              <div class="field">
                <label class="label" for="dietary">Dietary needs (optional)</label>
                <div class="control">
                  <input id="dietary" name="dietary" type="text" placeholder="e.g., vegetarian, gluten‑free" />
                </div>
              </div>
            </div>

            <div class="field">
              <label class="label" for="notes">Notes (optional)</label>
              <div class="control">
                <textarea id="notes" name="notes" placeholder="Anything we should know?"></textarea>
              </div>
            </div>

            <label class="checkbox">
              <input id="coc" type="checkbox" required />
              I agree to the event Code of Conduct
            </label>
            <div class="error" data-error-for="coc">You must agree to the Code of Conduct.</div>

            <div class="status" id="status"></div>

            <button class="button" id="submitBtn" type="submit">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M3 12h11" stroke="currentColor" stroke-width="1.5"/>
                <path d="M12 5l7 7-7 7" stroke="currentColor" stroke-width="1.5"/>
              </svg>
              Register now
            </button>
          </form>
        </section>

        <aside class="right">
          <h3 style="margin:0 0 8px 0">What to expect</h3>
          <p style="margin:0;color:var(--muted);font-size:14px">Keynotes from security pioneers, red-team/blue-team labs, and real‑world case studies. Networking lounges and a Capture‑the‑Flag challenge.</p>

          <div style="height:16px"></div>

          <div class="field">
            <div class="label">Safety first</div>
            <div class="hint">All sessions follow a strict code of conduct. Sensitive demos run in isolated environments.</div>
          </div>

          <div style="height:10px"></div>

          <div class="field">
            <div class="label">Scholarships</div>
            <div class="hint">Students and underrepresented groups can apply for fee waivers. Indicate interest in notes.</div>
          </div>

          <div style="height:10px"></div>

          <div class="field">
            <div class="label">Venue & dates</div>
            <div class="hint">October 21–23 • Hybrid (San Francisco + Virtual)</div>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <script>
    (function initTheme() {
      try {
        const saved = localStorage.getItem('theme');
        const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
        const isLight = saved ? saved === 'light' : prefersLight;
        if (isLight) document.documentElement.classList.add('light');
        updateThemeLabel();
      } catch (_) {}
    })();

    function toggleTheme() {
      const root = document.documentElement;
      const isLight = root.classList.toggle('light');
      try { localStorage.setItem('theme', isLight ? 'light' : 'dark'); } catch (_) {}
      updateThemeLabel();
    }

    function updateThemeLabel() {
      const label = document.getElementById('themeLabel');
      const isLight = document.documentElement.classList.contains('light');
      label.textContent = isLight ? 'Dark' : 'Light';
    }

    document.getElementById('themeToggle').addEventListener('click', toggleTheme);

    const form = document.getElementById('registerForm');
    const statusEl = document.getElementById('status');
    const toast = document.getElementById('toast');
    const submitBtn = document.getElementById('submitBtn');

    function showToast(text) {
      toast.textContent = text;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2400);
    }

    function setStatus(text, ok) {
      statusEl.textContent = text || '';
      statusEl.style.color = ok ? 'var(--success)' : 'var(--muted)';
    }

    function getFormData() {
      const data = new FormData(form);
      const payload = Object.fromEntries(data.entries());
      payload.workshops = data.getAll('workshops');
      payload.timestamp = new Date().toISOString();
      return payload;
    }

    function validate() {
      let valid = true;
      const requiredIds = ['fullName', 'email', 'organization', 'role', 'attendance', 'experience'];
      requiredIds.forEach((id) => {
        const el = document.getElementById(id);
        const err = document.querySelector(`[data-error-for="${id}"]`);
        const value = (el.value || '').trim();
        const isOk = value.length > 0 && !(el.tagName === 'SELECT' && !el.value);
        if (id === 'email' && value) {
          const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!re.test(value)) {
            err && err.classList.add('show');
            valid = false;
            return;
          }
        }
        if (!isOk) { err && err.classList.add('show'); valid = false; }
        else { err && err.classList.remove('show'); }
      });

      const coc = document.getElementById('coc');
      const cocErr = document.querySelector('[data-error-for="coc"]');
      if (!coc.checked) { cocErr.classList.add('show'); valid = false; }
      else { cocErr.classList.remove('show'); }

      return valid;
    }

    async function backgroundSubmit(payload) {
      // Attempt to POST to a presumed API, fall back to localStorage
      try {
        const res = await fetch('/api/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
        });
        if (!res.ok) throw new Error('Bad status');
        return { ok: true, source: 'network' };
      } catch (e) {
        try {
          const key = 'cyber_registrations';
          const all = JSON.parse(localStorage.getItem(key) || '[]');
          all.push(payload);
          localStorage.setItem(key, JSON.stringify(all));
          return { ok: true, source: 'local' };
        } catch (_) {
          return { ok: false };
        }
      }
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      setStatus('Validating…');
      if (!validate()) {
        setStatus('Please fix the highlighted fields.');
        return;
      }
      const payload = getFormData();
      submitBtn.disabled = true;
      submitBtn.style.opacity = 0.8;
      setStatus('Submitting in background…');
      const result = await backgroundSubmit(payload);
      submitBtn.disabled = false;
      submitBtn.style.opacity = 1;
      if (result.ok) {
        showToast(result.source === 'network' ? 'Registered successfully!' : 'Saved locally (offline).');
        setStatus('We have your registration. Check your inbox for confirmation.', true);
        form.reset();
      } else {
        setStatus('Could not save your registration. Please try again.');
      }
    });

    // Real-time error cleanup
    document.querySelectorAll('#registerForm input, #registerForm select, #registerForm textarea').forEach((el) => {
      el.addEventListener('input', () => {
        const err = document.querySelector(`[data-error-for="${el.id}"]`);
        if (err) err.classList.remove('show');
      });
      el.addEventListener('change', () => {
        const err = document.querySelector(`[data-error-for="${el.id}"]`);
        if (err) err.classList.remove('show');
      });
    });
  </script>
</body>
</html>

